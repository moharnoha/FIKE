<!DOCTYPE html>
<html lang="ar" dir="rtl"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Servio - الرئيسية</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary-blue: #2563eb; --border-gray: #e2e8f0; }
        body { margin: 0; padding: 20px; font-family: 'Inter', sans-serif; background-color: #f1f5f9; display: flex; flex-direction: column; align-items: center; }

        .wallet-container {
            background: #ffffff; border-radius: 20px; padding: 16px 20px; width: 100%; max-width: 380px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); border: 1.5px solid var(--border-gray);
            cursor: pointer; transition: transform 0.2s;
        }
        .wallet-container:active { transform: scale(0.98); }

        .wallet-label { font-size: 11px; color: #64748b; font-weight: 700; text-transform: uppercase; margin-bottom: 2px; display: block; }
        .wallet-amount { font-size: 24px; font-weight: 800; color: var(--primary-blue); font-family: 'Inter', monospace; }
        .wallet-icon-box { 
            width: 42px; height: 42px; background: #eff6ff; border-radius: 12px; 
            display: flex; align-items: center; justify-content: center; border: 1px solid #dbeafe; 
        }
        .wallet-icon-box svg { width: 22px; height: 22px; fill: var(--primary-blue); }
    </style>
</head>
<body>

    <div class="wallet-container" onclick="window.location.href='s/'">
        <div class="wallet-info">
            <span class="wallet-label">الرصيد المتاح</span>
            <div class="wallet-amount" id="available-balance">جاري التحميل...</div>
        </div>
        <div class="wallet-icon-box">
            <svg viewBox="0 0 24 24"><path d="M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18H21M12,16H22V8H12V16M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z"/></svg>
        </div>
    </div>

    <script>
        const scriptURL = "https://script.google.com/macros/s/AKfycbyOrOxzBS7JY_Zd2hAp2Nerv-bD3VROcOB5j9i6ZnGDFDVrgcGLVgLKVKJm-PpZy5jd/exec";

        async function fetchWalletData() {
            const email = localStorage.getItem("userGmail");
            const balanceElement = document.getElementById('available-balance');
            if (!email) { balanceElement.innerText = "سجل الدخول"; return; }

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    body: JSON.stringify({ gmail: email, action: "fetch" })
                });
                const data = await response.json();
                if (data.status === "success") {
                    balanceElement.innerText = `$${parseFloat(data.balance).toFixed(2)}`;
                }
            } catch (e) { balanceElement.innerText = "خطأ"; }
        }
        window.onload = fetchWalletData;
    </script>
</body>
</html>
